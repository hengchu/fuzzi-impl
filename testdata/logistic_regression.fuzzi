db:[1.0]     { { x1: float, x2: float, y: float } };
db1:    { {one: float, x1: float, x2: float, y: float } };

w:      { b: float, w1: float, w2: float };
dws:    { {b: float, w1: float, w2: float} };
temp:   {b: float, w1: float, w2: float};
t:      float;

gbias:  float;
gw1:    float;
gw2:    float;
i:      int;

trow:   {  x1: float, x2: float, y: float };
trow1:  { one: float, x1: float, x2: float, y: float };

bmap(db, db1, trow, i , trow1, {
  trow1 = { one = 1.0, x1 = 0.0, x2 = 0.0, y = 0.0 };
  trow1 = trow1 { x1 = trow.x1 };
  trow1 = trow1 { x2 = trow.x2 };
  trow1 = trow1 { y = trow.y };
});

wout: { b : float, w1 : float, w2 : float };
prob: float;
dot: float;
scale: float;

bmap(db1, dws, trow1, i, wout, {
  wout = { b = 0.0, w1 = 0.0, w2 = 0.0 };
  wout = wout { b = trow1.one };
  wout = wout { w1 = trow1.x1 };
  wout = wout { w2 = trow1.x2 };

  dot = (trow1.one) * (w.b) + (trow1.x1) * (w.w1) + (trow1.x2) * (w.w2);
  prob = 1.0 / (1.0 + exp((0.0-1.0) * (trow1.y) * dot));
  scale = (1.0 - prob) * (trow1.y);
  wout = wout { b = (wout.b) * scale };
  wout = wout { b = (wout.w1) * scale };
  wout = wout { b = (wout.w2) * scale };

  dot = 0.0;
  prob = 0.0;
  scale = 0.0;
});